# 连续去噪项目下一步行动建议

## 项目现状速览
- 代码仓库已经包含核心的 `ContinueDenoiser` 结构，以及用于无条件训练的 `TrainerUnCond` 壳体实现。
- 数据管线目前只有基础的 `MultichannelTS` 数据集定义，尚未提供可直接复现论文实验的配置文件或数据示例。
- `train.py` 入口假设存在 `configs/conf_exchange.toml`、`diffusion` 与 `utils.trainer` 等模块，但这些目录/文件目前缺失，导致训练流程无法运行。
- `README.md` 仅给出目录结构与 Todo 列表，尚未指导如何准备数据、配置实验或复现结果。

## 阻塞运行的关键缺口
1. **扩散流程依赖缺失**：`TrainerUnCond` 依赖 `diffusion` 包中的 `create_diffusion`、`create_named_schedule_sampler`，仓库中尚未提供对应实现或第三方依赖说明。
2. **训练基础设施缺失**：`utils.trainer` 中的 `ITrainer`、`Accelerator` 包装未包含在仓库内，目前无法启动训练循环。
3. **实验配置文件缺失**：`train.py` 默认指向 `./configs/conf_exchange.toml`，但仓库缺少 `configs` 目录与示例配置，用户无法了解超参设置。
4. **数据准备不明确**：`MultichannelTS` 支持从 `.txt`/`.csv` 读取，但仓库未提供样例数据或清晰说明，难以复现实验。

## 建议的优先级路线图
1. **补齐最小可运行训练链路**
   - 引入/实现 `diffusion` 模块与 `utils.trainer` 所需的类与函数，确保 `TrainerUnCond` 可正常实例化与执行。
   - 提供 `configs/` 目录及至少一个可运行的 TOML/JSON 配置文件，包含模型、扩散过程、训练、数据等超参定义。
   - 在 `README` 或独立文档中说明如何选择 `--task`、如何配置 `Accelerator`、以及常见硬件/软件依赖。

2. **完善数据准备说明**
   - 在 `docs/` 下新增数据准备指南，列出论文使用的数据集、下载链接、预处理脚本或参考格式。
   - 若数据需归一化或子采样，提供示例脚本与参数说明，保证用户能复现 `MultichannelTS` 期望的输入。

3. **训练与评估流程**
   - 增加验证/测试脚本，展示如何从训练好的模型生成预测、评估误差指标，并保存可视化结果。
   - 为 `TrainerUnCond` 补充日志记录、检查点管理与异常处理示例，帮助用户在加速器环境（单机/多机）下运行。

4. **文档与可复现性**
   - 扩展 `README`：添加项目背景、依赖安装、快速开始、常见问题、论文引用等内容。
   - 在 `docs/` 中维护「实验记录模板」或「配置说明」，方便团队成员共享实验设置。
   - 若计划发布预训练权重，提供下载途径与校验信息，并更新 Todo。

5. **质量保障**
   - 引入基础测试（例如对 `ContinueDenoiser` 的形状检查、对数据集切片逻辑的单元测试）。
   - 配置 `pre-commit` 或 `ruff`/`black` 等工具，保持代码风格一致性。
   - 搭建自动化训练/推理脚本的 smoke test（小批量、短迭代），验证依赖齐全后流水线可跑通。

## 可选的后续增强
- 探索条件版模型 `ConditionContinueDenoiser` 的训练器，实现多模态/外生变量条件预测。
- 封装可视化模块，用于对比不规则采样的原始序列与模型重建结果。
- 编写 Dockerfile 或环境说明，便于快速部署。

---
以上建议按照「先跑通、再完善、最后增强」的原则排列，可据此拆分任务排期。欢迎指出需要进一步展开的部分。
